<!doctype html>
<html>
  <head>
    <title>Dashboard</title>
    <meta charset="UTF-8" />

    <script type="module">
      import { initializeApp } from "https://www.gstatic.com/firebasejs/10.12.0/firebase-app.js";
      import {
        getAuth,
        onAuthStateChanged,
        signOut,
      } from "https://www.gstatic.com/firebasejs/10.12.0/firebase-auth.js";
      import {
        getFirestore,
        doc,
        getDoc,
      } from "https://www.gstatic.com/firebasejs/10.12.0/firebase-firestore.js";

      const firebaseConfig = {
        apiKey: "AIzaSyAC-NfULdAUdp4yDbKHiNYTF9EZg1qG_Lg",
        authDomain: "yugastrlogin.firebaseapp.com",
        projectId: "yugastrlogin",
        storageBucket: "yugastrlogin.firebasestorage.app",
        messagingSenderId: "391276873890",
        appId: "1:391276873890:web:79f5c1ed7afa32ec8daffb",
      };

      const app = initializeApp(firebaseConfig);
      const auth = getAuth(app);
      const db = getFirestore(app);

      // Store user course globally for card navigation
      window.userCourse = null;

      onAuthStateChanged(auth, async (user) => {
        if (user) {
          const docSnap = await getDoc(doc(db, "users", user.uid));

          if (docSnap.exists()) {
            const data = docSnap.data();

            // Store course globally
            window.userCourse = (data.course || "").toUpperCase();

            // Basic Info
            document.getElementById("userName").innerText = data.name;
            document.getElementById("email").innerText = data.email;
            document.getElementById("phone").innerText = data.phone;
            document.getElementById("course").innerText = data.course;

            // Avatar
            document.getElementById("avatar").innerText = data.name
              .charAt(0)
              .toUpperCase();

            // Role Based Changes
            if (data.role === "teacher") {
              document.getElementById("profileTitle").innerText =
                "Teacher Profile";
              document.getElementById("userId").innerText =
                data.teacherId || "‚Äî";
            } else {
              document.getElementById("profileTitle").innerText =
                "Student Profile";
              document.getElementById("userId").innerText =
                data.studentId || "‚Äî";
            }
          }
        } else {
          window.location.href = "login/login.html";
        }
      });

      // Navigate to course-specific subjects page
      window.goToSubjects = function () {
        if (!window.userCourse) {
          alert("Loading course information...");
          return;
        }
        const courseFile =
          window.userCourse === "MCA" ? "mca.html" : "bca.html";
        window.location.href = "subjects/" + courseFile;
      };

      window.logoutUser = function () {
        signOut(auth).then(() => {
          window.location.href = "login/login.html";
        });
      };

      window.toggleTheme = function () {
        const body = document.body;
        const isDark = body.classList.toggle("dark-theme");
        const icon = document.getElementById("themeIcon");
        icon.textContent = isDark ? "‚òÄÔ∏è" : "üåô";
        localStorage.setItem("theme", isDark ? "dark" : "light");
      };

      // Load theme on page load
      window.addEventListener("DOMContentLoaded", () => {
        const savedTheme = localStorage.getItem("theme");
        if (savedTheme === "dark") {
          document.body.classList.add("dark-theme");
          document.getElementById("themeIcon").textContent = "‚òÄÔ∏è";
        }
      });
    </script>

    <style>
      /* ================= GLOBAL ================= */

      * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
        font-family: "Poppins", sans-serif;
      }

      body {
        background: #f5f7fb;
        color: #1f2937;
      }

      /* ================= NAVBAR ================= */

      .navbar {
        height: 70px;
        background: #ffffff;
        display: flex;
        justify-content: space-between;
        align-items: center;
        padding: 0 50px;
        box-shadow: 0 2px 12px rgba(0, 0, 0, 0.05);
        position: sticky;
        top: 0;
        z-index: 1000;
      }

      .brand {
        font-size: 24px;
        font-weight: 700;
        letter-spacing: 0.5px;
        color: #1e293b;
      }

      .nav-right {
        display: flex;
        align-items: center;
        gap: 30px;
      }

      .nav-link {
        text-decoration: none;
        font-weight: 500;
        color: #475569;
        transition: 0.3s;
      }

      .nav-link:hover {
        color: #4e73df;
      }

      .logout-btn {
        padding: 8px 16px;
        border: none;
        border-radius: 8px;
        background: #4e73df;
        color: white;
        cursor: pointer;
        font-weight: 500;
        transition: 0.3s;
      }

      .logout-btn:hover {
        background: #3d5cc4;
      }

      .theme-toggle {
        background: #eef2ff;
        padding: 8px 14px;
        border-radius: 20px;
        cursor: pointer;
        transition: 0.3s;
      }

      .theme-toggle:hover {
        background: #dbe4ff;
      }

      /* ================= DASHBOARD LAYOUT ================= */

      .dashboard {
        display: grid;
        grid-template-columns: 280px 1fr;
        gap: 40px;
        padding: 40px 60px;
        align-items: start;
      }

      /* ================= SIDEBAR ================= */

      .sidebar {
        position: sticky;
        top: 110px;
      }

      .profile-card {
        background: #ffffff;
        padding: 30px 25px;
        border-radius: 18px;
        box-shadow: 0 15px 35px rgba(0, 0, 0, 0.06);
        transition: 0.3s;
      }

      .profile-card:hover {
        transform: translateY(-5px);
      }

      .avatar {
        width: 70px;
        height: 70px;
        background: linear-gradient(135deg, #4e73df, #1cc88a);
        color: white;
        font-size: 26px;
        display: flex;
        align-items: center;
        justify-content: center;
        border-radius: 18px;
        margin-bottom: 20px;
      }

      .profile-card h3 {
        font-size: 18px;
        margin-bottom: 6px;
      }

      .profile-card p {
        font-size: 14px;
        color: #64748b;
        margin-top: 8px;
      }

      .profile-name {
        font-size: 18px;
        font-weight: 600;
        color: #2c3e50;
        margin-bottom: 15px;
      }

      .profile-info {
        display: flex;
        flex-direction: column;
        gap: 12px;
      }

      .info-item {
        display: flex;
        flex-direction: column;
        gap: 4px;
      }

      .info-label {
        font-size: 12px;
        font-weight: 600;
        color: #7f8c8d;
        text-transform: uppercase;
        letter-spacing: 0.5px;
      }

      .info-value {
        font-size: 14px;
        color: #2c3e50;
        font-weight: 500;
      }

      .id-item {
        padding-top: 8px;
        border-top: 1px solid #e0e0e0;
      }

      .id-value {
        font-size: 16px;
        font-weight: 700;
        color: #4e73df;
        letter-spacing: 1px;
      }

      .action-buttons {
        display: flex;
        flex-direction: column;
        gap: 10px;
        margin-top: 20px;
      }

      .action-btn {
        display: flex;
        align-items: center;
        justify-content: center;
        gap: 8px;
        padding: 12px 16px;
        border: none;
        border-radius: 10px;
        font-weight: 600;
        cursor: pointer;
        transition: all 0.3s ease;
        font-size: 14px;
      }

      .make-request-btn {
        background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        color: white;
      }

      .make-request-btn:hover {
        transform: translateY(-2px);
        box-shadow: 0 8px 20px rgba(102, 126, 234, 0.4);
      }

      .recent-request-btn {
        background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
        color: white;
      }

      .recent-request-btn:hover {
        transform: translateY(-2px);
        box-shadow: 0 8px 20px rgba(245, 87, 108, 0.4);
      }

      .btn-icon {
        font-size: 18px;
      }

      .btn-text {
        font-weight: 600;
      }

      /* ================= MAIN CONTENT ================= */

      .main-content {
        display: flex;
        flex-direction: column;
      }

      /* ================= CARDS ================= */

      .card-grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(320px, 1fr));
        gap: 30px;
      }

      .card {
        background: white;
        border-radius: 20px;
        overflow: hidden;
        box-shadow: 0 10px 25px rgba(0, 0, 0, 0.08);
        transition: 0.3s ease;
      }

      .card:hover {
        transform: translateY(-8px);
        box-shadow: 0 25px 50px rgba(0, 0, 0, 0.12);
      }

      .card-img {
        height: 220px;
        display: flex;
        align-items: center;
        justify-content: center;
        font-size: 90px;
        background: linear-gradient(135deg, #e0e7ff, #f3e8ff);
      }

      .card-footer {
        padding: 22px;
        text-align: center;
        font-weight: 600;
        font-size: 17px;
        color: #1e293b;
        background: #ffffff;
      }

      /* ================= CHATBOT ================= */

      #chat-toggle {
        position: fixed;
        bottom: 25px;
        right: 25px;
        width: 60px;
        height: 60px;
        background: #4e73df;
        color: white;
        border-radius: 50%;
        display: flex;
        align-items: center;
        justify-content: center;
        font-size: 26px;
        cursor: pointer;
        box-shadow: 0 10px 30px rgba(0, 0, 0, 0.25);
        transition: 0.3s;
      }

      #chat-toggle:hover {
        transform: scale(1.1);
      }

      #chatbot {
        position: fixed;
        bottom: 100px;
        right: 25px;
        width: 350px;
        height: 450px;
        background: white;
        border-radius: 20px;
        display: none;
        flex-direction: column;
        overflow: hidden;
        box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
      }

      #chatbot.expanded {
        width: 600px;
        height: 600px;
      }

      #chat-header {
        background: #4e73df;
        color: white;
        padding: 14px 18px;
        display: flex;
        justify-content: space-between;
        font-weight: 600;
      }

      #chat-box {
        flex: 1;
        padding: 15px;
        overflow-y: auto;
        font-size: 14px;
      }

      #chat-input-area {
        display: flex;
        border-top: 1px solid #eee;
      }

      #chat-input {
        flex: 1;
        border: none;
        padding: 12px;
        outline: none;
      }

      #chat-input-area button {
        background: #4e73df;
        color: white;
        border: none;
        padding: 0 18px;
        cursor: pointer;
      }

      /* ================= FOOTER ================= */

      .site-footer {
        margin-top: 80px;
        padding: 70px 60px 30px;
        background: #ffffff;
        border-top: 1px solid #e5e7eb;
      }

      .footer-about-full {
        max-width: 1100px;
        margin-bottom: 60px;
      }

      .footer-about-full h3 {
        margin-bottom: 15px;
      }

      .footer-about-full p {
        line-height: 1.8;
        color: #4b5563;
      }

      .footer-team-row {
        margin-bottom: 40px;
      }

      .footer-team-row h3 {
        margin: 30px 0 20px;
      }

      .team-grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(260px, 1fr));
        gap: 30px;
      }

      .team-member {
        background: #f8fafc;
        border-radius: 16px;
        padding: 25px;
        text-align: center;
        box-shadow: 0 8px 20px rgba(0, 0, 0, 0.05);
        transition: 0.3s;
      }

      .team-member:hover {
        transform: translateY(-5px);
      }

      .team-member h4 {
        margin-bottom: 10px;
      }

      .team-member p {
        font-size: 13px;
        margin: 5px 0;
        color: #64748b;
      }

      .team-member a {
        display: inline-block;
        margin-top: 10px;
        color: #4e73df;
        text-decoration: none;
        font-size: 13px;
      }

      .team-member a:hover {
        text-decoration: underline;
      }

      .footer-bottom {
        text-align: center;
        margin-top: 50px;
        padding-top: 20px;
        font-size: 13px;
        color: #6b7280;
        border-top: 1px solid #e5e7eb;
      }

      /* ================= DARK THEME ================= */

      body.dark-theme {
        background: #0f172a;
        color: #e2e8f0;
      }

      /* Navbar */
      body.dark-theme .navbar {
        background: #111827;
        box-shadow: 0 2px 12px rgba(0, 0, 0, 0.4);
      }

      body.dark-theme .brand {
        color: #f1f5f9;
      }

      body.dark-theme .nav-link {
        color: #cbd5e1;
      }

      body.dark-theme .nav-link:hover {
        color: #60a5fa;
      }

      body.dark-theme .logout-btn {
        background: #2563eb;
      }

      body.dark-theme .logout-btn:hover {
        background: #1d4ed8;
      }

      body.dark-theme .theme-toggle {
        background: #1e293b;
      }

      /* Sidebar */
      body.dark-theme .profile-card {
        background: #1e293b;
        box-shadow: 0 15px 35px rgba(0, 0, 0, 0.4);
      }

      body.dark-theme .profile-card p {
        color: #cbd5e1;
      }

      body.dark-theme .profile-card {
        background: #1e293b;
        box-shadow: 0 15px 35px rgba(0, 0, 0, 0.4);
      }

      body.dark-theme .profile-name {
        color: #e0e0e0;
      }

      body.dark-theme .info-label {
        color: #888888;
      }

      body.dark-theme .info-value {
        color: #b0b0b0;
      }

      body.dark-theme .id-item {
        border-top-color: #2d2d2d;
      }

      body.dark-theme .id-value {
        color: #7b9eff;
      }

      /* Cards */
      body.dark-theme .card {
        background: #1e293b;
        box-shadow: 0 15px 40px rgba(0, 0, 0, 0.4);
      }

      body.dark-theme .card-img {
        background: linear-gradient(135deg, #1e293b, #0f172a);
      }

      body.dark-theme .card-footer {
        background: #1e293b;
        color: #f1f5f9;
      }

      /* Chatbot */
      body.dark-theme #chatbot {
        background: #1e293b;
      }

      body.dark-theme #chat-header {
        background: #2563eb;
      }

      body.dark-theme #chat-box {
        color: #e2e8f0;
      }

      body.dark-theme #chat-input-area {
        border-top: 1px solid #334155;
      }

      body.dark-theme #chat-input {
        background: #0f172a;
        color: #e2e8f0;
      }

      body.dark-theme #chat-input-area button {
        background: #2563eb;
      }

      /* Footer */
      body.dark-theme .site-footer {
        background: #111827;
        border-top: 1px solid #334155;
      }

      body.dark-theme .footer-about-full p {
        color: #ffffff;
      }

      body.dark-theme .team-member {
        background: #1e293b;
        box-shadow: 0 10px 25px rgba(0, 0, 0, 0.4);
      }

      body.dark-theme .team-member p {
        color: #ffffff;
      }

      body.dark-theme .footer-bottom {
        color: #ffffff;
      }

      body.dark-theme .site-footer h3 {
        color: #ffffff;
      }

      body.dark-theme .site-footer {
        color: #ffffff;
      }

      /* ================= RESPONSIVE ================= */

      @media (max-width: 1024px) {
        .dashboard {
          grid-template-columns: 1fr;
        }

        .sidebar {
          position: relative;
        }
      }
    </style>
  </head>

  <body>
    <!-- NAVBAR -->
    <div class="navbar">
      <div class="brand">Ramaiah</div>
      <div class="nav-right">
        <a href="home.html" class="nav-link">Home</a>
        <a href="support/support.html" class="nav-link">Support</a>
        <div class="theme-toggle" onclick="toggleTheme()">
          <span id="themeIcon">üåô</span>
        </div>
        <button class="logout-btn" onclick="logoutUser()">Logout</button>
      </div>
    </div>

    <div class="dashboard">
      <!-- SIDEBAR -->
      <div class="sidebar">
        <div class="profile-card">
          <div class="avatar" id="avatar">U</div>
          <h3 id="profileTitle">Student Profile</h3>
          <p class="profile-name" id="userName">Guest</p>

          <div class="profile-info">
            <div class="info-item">
              <span class="info-label">Email</span>
              <span class="info-value" id="email">‚Äî</span>
            </div>
            <div class="info-item">
              <span class="info-label">Phone</span>
              <span class="info-value" id="phone">‚Äî</span>
            </div>
            <div class="info-item">
              <span class="info-label">Course</span>
              <span class="info-value" id="course">‚Äî</span>
            </div>
            <div class="info-item id-item">
              <span class="info-label">Student ID</span>
              <span class="info-value id-value" id="userId">‚Äî</span>
            </div>
          </div>
        </div>

        <div class="action-buttons">
          <button class="action-btn make-request-btn" onclick="window.location.href = 'requestSystem/makeRequest.html'">
            <span class="btn-icon">‚úèÔ∏è</span>
            <span class="btn-text">Make Request</span>
          </button>
          <button class="action-btn recent-request-btn" onclick="window.location.href = 'requestSystem/publicRequests.html'">
            <span class="btn-icon">üìã</span>
            <span class="btn-text">Recent Requests</span>
          </button>
        </div>
      </div>

      <!-- MAIN CONTENT -->
      <div class="main-content">
        <div class="card-grid">
          <div class="card" onclick="goToSubjects()" style="cursor: pointer">
            <div class="card-img">üìö</div>
            <div class="card-footer">Study Material</div>
          </div>

          <div
            class="card"
            onclick="window.location.href = 'connect/data_bank_form.html'"
            style="cursor: pointer"
          >
            <div class="card-img">ü§ù</div>
            <div class="card-footer">Connect</div>
          </div>

          <div
            class="card"
            onclick="window.location.href = 'databank/data_bank.html'"
            style="cursor: pointer"
          >
            <div class="card-img">üíæ</div>
            <div class="card-footer">Data Bank</div>
          </div>
        </div>
      </div>
    </div>
    <!-- PASTE CHATBOT CODE HERE (before body ends) -->

    <!-- FLOATING BUTTON -->
    <div id="chat-toggle">üí¨</div>

    <!-- CHAT WINDOW -->
    <div id="chatbot">
      <div id="chat-header">
        AI Assistant
        <span id="close-chat">‚úñ</span>
      </div>

      <div id="chat-box"></div>

      <div id="chat-input-area">
        <input id="chat-input" type="text" placeholder="Ask something..." />
        <button id="sendBtn">Send</button>
      </div>
    </div>

    <!-- FOOTER -->
    <footer class="site-footer">
      <div class="footer-container">
        <div class="footer-about-full">
          <h3>About ProStudent</h3>
          <p>
            Pro Student is your all-in-one academic companion designed to
            support students in their learning journey. From organized notes and
            previous year question papers to helpful study resources, we make it
            easier for you to stay prepared and track your progress. Learn
            smarter, stay consistent, and achieve your goals with Pro Student.
          </p>
        </div>

        <div class="footer-team-row">
            
      <h3>Developed By</h3>

      <div class="team-grid">
        <div class="team-member">
          <h4>Mukund Keshwani</h4>
          <p>Email: mukund.haresh@bcah.christuniversity.in</p>
          <p>Contact: +91 9359888264</p>
          <a href="https://www.linkedin.com/in/mukund-keshwani-315148378/" target="_blank">LinkedIn</a>
        </div>

        <div class="team-member">
          <h4>Simran Singh</h4>
          <p>Email: simran.singh@bcah.christuniversity.in</p>
          <p>Contact: +91 9798380631</p>
          <a href="https://www.linkedin.com/in/simran-singh-ab9524350/" target="_blank">LinkedIn</a>
        </div>

        <div class="team-member">
          <h4>Piyush Sinha</h4>
          <p>Email: piyush.sinha@bcah.christuniversity.in</p>
          <p>Contact: +91 7759040065</p>
          <a href="https://www.linkedin.com/in/piyush-sinha-91702a378/" target="_blank">LinkedIn</a>
        </div>
      </div>
      <br />
          <h3>About Us</h3>
          <p>
            We are The Closing Tags, a team of first-year BCA students from
            Christ University who are passionate about learning and building
            through real-world experiences. We actively participate in
            hackathons and tech events to apply our classroom knowledge to
            practical problems, improve our skills, and work collaboratively
            under real constraints. Our focus is on creating clean,
            user-friendly, and meaningful solutions while continuously growing
            as developers through hands-on projects and innovation-driven
            learning.
          </p>
        </div>
      </div>

      <div class="footer-bottom">
        <p>¬© 2026 Navio. All rights reserved.</p>
      </div>
    </footer>

    <style>
      #chat-toggle {
        position: fixed;
        bottom: 20px;
        right: 20px;
        width: 65px;
        height: 65px;
        background: #4e73df;
        color: white;
        font-size: 28px;
        display: flex;
        align-items: center;
        justify-content: center;
        border-radius: 50%;
        cursor: pointer;
        z-index: 9999;
        transition: all 0.3s ease;
      }

      #chat-toggle:hover {
        transform: scale(1.1);
        box-shadow: 0 5px 20px rgba(78, 115, 223, 0.4);
      }

      #chatbot {
        position: fixed;
        bottom: 100px;
        right: 20px;
        width: 320px;
        height: 420px;
        background: white;
        border-radius: 15px;
        box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
        display: none;
        flex-direction: column;
        overflow: hidden;
        z-index: 9999;
        transition: all 0.3s ease;
      }

      #chatbot.expanded {
        width: 600px;
        height: 600px;
        bottom: 50px;
      }

      #chat-header {
        background: #4e73df;
        color: white;
        padding: 12px;
        display: flex;
        justify-content: space-between;
        font-weight: 600;
      }

      #chat-box {
        flex: 1;
        padding: 10px;
        overflow-y: auto;
        font-size: 14px;
      }

      #chat-input-area {
        display: flex;
        border-top: 1px solid #ddd;
      }

      #chat-input {
        flex: 1;
        padding: 10px;
        border: none;
        outline: none;
        font-size: 14px;
      }

      #chat-input-area button {
        background: #4e73df;
        color: white;
        border: none;
        padding: 10px 15px;
        cursor: pointer;
        font-weight: 600;
        transition: background 0.2s;
      }

      #chat-input-area button:hover {
        background: #3d5cc4;
      }

      #close-chat {
        cursor: pointer;
        font-size: 20px;
        transition: transform 0.2s;
      }

      #close-chat:hover {
        transform: scale(1.2);
      }

      /* FOOTER STYLES */
      .site-footer {
        margin-top: 60px;
        padding: 50px 40px 20px;
        background: rgba(224, 242, 255, 0.6);
        backdrop-filter: blur(10px);
        border-top: 1px solid rgba(79, 70, 229, 0.2);
        color: #222;
      }

      .footer-about-full {
        width: 100%;
        margin-bottom: 40px;
      }

      .footer-about-full p {
        width: 100%;
        max-width: 1100px;
        line-height: 1.8;
        color: #333;
      }

      .footer-team-row h3 {
        font-size: 20px;
        margin-bottom: 20px;
      }

      .team-grid {
        display: grid;
        grid-template-columns: repeat(3, 1fr);
        gap: 30px;
      }

      .team-member {
        background: rgba(255, 255, 255, 0.45);
        backdrop-filter: blur(8px);
        border-radius: 16px;
        padding: 20px;
        text-align: center;
        box-shadow: 0 10px 25px rgba(0, 0, 0, 0.08);
      }

      .team-member h4 {
        font-size: 16px;
        margin-bottom: 8px;
      }

      .team-member p {
        font-size: 13px;
        margin: 4px 0;
        color: #444;
      }

      .team-member a {
        display: inline-block;
        margin-top: 8px;
        font-size: 13px;
        color: #6b4eff;
        text-decoration: none;
      }

      .team-member a:hover {
        text-decoration: underline;
      }

      .footer-bottom {
        text-align: center;
        margin-top: 40px;
        padding-top: 15px;
        font-size: 13px;
        border-top: 1px solid rgba(0, 0, 0, 0.1);
        color: #444;
      }

      @media (max-width: 900px) {
        .team-grid {
          grid-template-columns: 1fr;
        }
      }
    </style>

    <script>
      const API_KEY =
        "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";

      let isExpanded = false;

      // OPEN CHAT
      document.getElementById("chat-toggle").onclick = () => {
        const chatbot = document.getElementById("chatbot");
        chatbot.style.display = "flex";

        // Expand on second click
        setTimeout(() => {
          isExpanded = !isExpanded;
          if (isExpanded) {
            chatbot.classList.add("expanded");
          } else {
            chatbot.classList.remove("expanded");
          }
        }, 100);
      };

      // CLOSE CHAT
      document.getElementById("close-chat").onclick = () => {
        document.getElementById("chatbot").style.display = "none";
        isExpanded = false;
      };

      // SEND BUTTON
      document.getElementById("sendBtn").onclick = sendMessage;

      // ENTER KEY SUPPORT
      document
        .getElementById("chat-input")
        .addEventListener("keypress", (e) => {
          if (e.key === "Enter") {
            e.preventDefault();
            sendMessage();
          }
        });

      async function sendMessage() {
        let input = document.getElementById("chat-input");
        let msg = input.value.trim();
        if (!msg) return;

        let box = document.getElementById("chat-box");
        box.innerHTML += `<p><b>You:</b> ${msg}</p>`;
        input.value = "";

        try {
          const res = await fetch(
            "https://openrouter.ai/api/v1/chat/completions",
            {
              method: "POST",
              headers: {
                Authorization: "Bearer " + API_KEY,
                "Content-Type": "application/json",
              },
              body: JSON.stringify({
                model: "openai/gpt-3.5-turbo",
                messages: [{ role: "user", content: msg }],
              }),
            },
          );

          const data = await res.json();
          console.log(data);

          let reply = data.choices?.[0]?.message?.content || "No reply";

          box.innerHTML += `<p><b>Bot:</b> ${reply}</p>`;
          box.scrollTop = box.scrollHeight;
        } catch (e) {
          box.innerHTML += `<p style="color:red;">API error</p>`;
        }
      }
    </script>
  </body>
</html>


